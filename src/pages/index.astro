---
import BaseHead from "../components/BaseHead.astro";
import Analytics from "../components/Analytics.astro";
import Header from "../components/Header.astro";
import PostLink from "../components/PostLink.astro";
import { getCollection } from "astro:content";
import { SITE_TITLE, SITE_DESCRIPTION } from "../config";

const posts = (await getCollection("posts")).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<!doctype html>
<html lang="en-us">
  <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
  <body>
    <Header />
    <main>
      <p>
        This is my blog, I made this site to have a place to put random
        writings. The resource page has a list of things I run for public use
        and a list of alternative software to help you have more control of your
        data and rely less on large corps. I hope it's helpful.
      </p>

      <p>
        sometimes I get the urge to write sometihng I'm wokring on and wanted a
        space for it. i got alot from others sharing hteir learning and knowlage
        and wanted to do the same. maybe some today i learned style writings
        These days I'm working as a site reliability engineer.
      </p>
      <p>contact me here</p>

      <h3>Here's my most recent posts</h3>

      <ul class="posts-list">
        {
          posts.map((p) => (
            <PostLink
              slug={p.slug}
              title={p.data.title}
              tags={p.data.tags}
              description={p.data.description}
              pubDate={p.data.pubDate}
            />
          ))
        }
      </ul>
    </main>
    <Analytics />
  </body>
</html>
